(this["webpackJsonpreact-todo-2"]=this["webpackJsonpreact-todo-2"]||[]).push([[0],{43:function(e,t,n){e.exports={Todo:"Todo_Todo__17XaG",DeleteButton:"Todo_DeleteButton__3O6Sm",crossedOut:"Todo_crossedOut__vi4Rw"}},67:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(0),c=n.n(a),s=n(30),i=n.n(s),u=(n(67),n(68),n(14)),o=n(11),j=n(93),l=n(86),d=n(92),b=n(34),O=n(10),h=n(55),x=(n(74),n(76),h.a.initializeApp({apiKey:"AIzaSyDYTomNThpeKcHKEGAqEt_Gzpfb35stLnk",authDomain:"react-todo-redone.firebaseapp.com",projectId:"react-todo-redone",storageBucket:"react-todo-redone.appspot.com",messagingSenderId:"102484433322",appId:"1:102484433322:web:ade813e9546aa82286b3d3",measurementId:"G-PR36NWSSPT",databaseURL:"https://react-todo-redone-default-rtdb.europe-west1.firebasedatabase.app"})),p=x.auth(),f=x.database(),m=Object(a.createContext)();function v(e){var t=e.children,n=Object(a.useState)(),c=Object(O.a)(n,2),s=c[0],i=c[1],u=Object(a.useState)(!0),o=Object(O.a)(u,2),j=o[0],l=o[1];Object(a.useEffect)((function(){return p.onAuthStateChanged((function(e){i(e),l(!1)}))}),[]);var d={currentUser:s,signup:function(e,t){return p.createUserWithEmailAndPassword(e,t)},login:function(e,t){return p.signInWithEmailAndPassword(e,t)},logout:function(){return p.signOut()},resetPassword:function(e){return p.sendPasswordResetEmail(e)}};return Object(r.jsx)(m.Provider,{value:d,children:!j&&t})}function g(){return Object(a.useContext)(m)}var k=function(){var e=g().currentUser,t=e?Object(r.jsx)(b.LinkContainer,{to:"/logout",children:Object(r.jsx)(j.a.Link,{children:Object(r.jsx)(l.a,{variant:"outline-primary",children:"Logout"})})}):Object(r.jsx)(b.LinkContainer,{to:"/signup",children:Object(r.jsx)(j.a.Link,{children:Object(r.jsx)(l.a,{variant:"outline-primary",children:"Register"})})}),n=Object(r.jsxs)(r.Fragment,{children:[e&&Object(r.jsx)(b.LinkContainer,{to:"/profile",children:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(d.a.Text,{children:"Hello,"}),Object(r.jsx)(j.a.Link,{children:e.email})]})}),t]});return Object(r.jsxs)(d.a,{bg:"light",variant:"light",children:[Object(r.jsx)(b.LinkContainer,{to:"/",children:Object(r.jsx)(d.a.Brand,{href:"/",children:"Logo"})}),Object(r.jsx)(j.a,{className:"ml-auto flex align-items-center",children:n})]})},w=n(9),y=n.n(w),N=n(31),S=n(27),C=n(12),L=n(89),A=n(94),T=n(87),P=n(59),D=n(91),E=n(43),R=n.n(E),F=function(e){return Object(r.jsxs)(P.a,{className:R.a.Todo,children:[Object(r.jsx)(D.a.Check,{inline:!0,type:"checkbox",custom:!0,id:"taskDone".concat(e.id),onChange:e.onTaskChecked,checked:e.done}),Object(r.jsx)("span",{className:e.done?[R.a.crossedOut,"text-muted"].join(" "):null,children:e.name}),Object(r.jsx)(l.a,{size:"sm",className:R.a.DeleteButton,variant:"outline-danger",onClick:e.onTaskDeleted,children:"X"})]})},_=function(e){return Object(r.jsx)(T.a,{variant:"flush",children:Object.keys(e.tasks).map((function(t,n){var a=e.tasks[t],c=a.name,s=a.done,i=t;return Object(r.jsx)(F,{name:c,done:s,id:i,onTaskChecked:function(t){return e.onTaskChecked(t,i)},onTaskDeleted:function(t){return e.onTaskDeleted(i)}},n)}))})};_.defaultProps={tasks:[]};var B=_,G=n(88),I=n(60),U=function(e){return Object(r.jsx)(D.a,{style:{margin:"3vh auto"},onSubmit:e.submit,children:Object(r.jsxs)(G.a,{children:[Object(r.jsx)(I.a,{children:Object(r.jsx)(D.a.Control,{value:e.taskName,onChange:e.changed,placeholder:"Add your task here :)"})}),Object(r.jsx)(I.a,{xs:"auto",children:Object(r.jsx)(l.a,{disabled:e.disabled,onClick:e.submit,children:"Add"})})]})})},q=n(61),W=Object(a.createContext)(),H=function(e){var t=e.children,n=Object(a.useState)(null),c=Object(O.a)(n,2),s=c[0],i=c[1],u=Object(a.useState)(!0),o=Object(O.a)(u,2),j=o[0],l=o[1],d=g().currentUser;Object(a.useEffect)((function(){l(!0),d&&i(f.ref("/userData/".concat(d.uid))),l(!1)}),[d]);var b={getAllAsync:function(){var e=Object(C.a)(y.a.mark((function e(){var t,n=arguments;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.length>0&&void 0!==n[0]?n[0]:15,n.length>1&&void 0!==n[1]?n[1]:null,s){e.next=4;break}return e.abrupt("return",null);case 4:return e.prev=4,e.next=7,s.get();case 7:return t=e.sent,e.abrupt("return",t.val());case 11:return e.prev=11,e.t0=e.catch(4),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}(),createAsync:function(){var e=Object(C.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return",Object(q.v1)());case 2:return e.prev=2,e.next=5,s.push(t);case 5:return n=e.sent,e.abrupt("return",n.path.pieces_[n.path.pieces_.length-1]);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),updateAsync:function(){var e=Object(C.a)(y.a.mark((function e(t,n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return",!0);case 2:return e.prev=2,e.next=5,s.child(t).update(n);case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",!1);case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}(),removeAsync:function(){var e=Object(C.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return",!0);case 2:return e.prev=2,e.next=5,s.child(t).remove();case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",!1);case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),removeAllAsync:function(){var e=Object(C.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return",!0);case 2:return e.prev=2,e.next=5,s.remove();case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",!1);case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(){return e.apply(this,arguments)}}()};return Object(r.jsx)(W.Provider,{value:b,children:!j&&t})},z=function(){var e=Object(a.useState)({}),t=Object(O.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(""),i=Object(O.a)(s,2),o=i[0],j=i[1],l=Object(a.useState)(!1),d=Object(O.a)(l,2),b=d[0],h=d[1],x=Object(a.useState)(null),p=Object(O.a)(x,2),f=p[0],m=p[1],v=Object(a.useState)(!0),k=Object(O.a)(v,2),w=k[0],T=k[1],P=Object(a.useContext)(W),D=P.createAsync,E=P.removeAsync,R=P.getAllAsync,F=g().currentUser;Object(a.useEffect)((function(){R().then((function(e){e&&c(e)})).catch((function(){m("Could not retrieve data from server.")}))}),[]);var _=function(e){return""!==e},G=function(){var e=Object(C.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,D({name:o,done:!1});case 3:if(n=e.sent){e.next=7;break}return m("Cannot create new task on the server."),e.abrupt("return");case 7:c((function(e){return Object(S.a)(Object(S.a)({},e),{},Object(N.a)({},n,{name:o,done:!1}))})),j(""),h(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(C.a)(y.a.mark((function e(t){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(),e.next=3,E(t);case 3:if(e.sent){e.next=7;break}return m("Cannot remove task on the server."),e.abrupt("return");case 7:r=Object.entries(n).filter((function(e){var n=Object(O.a)(e,2),r=n[0];n[1];return r!==t})),c(Object.fromEntries(r));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)(L.a,{className:"flex justify-content-center mx-5",children:[!F&&w&&Object(r.jsxs)(A.a,{dismissible:!0,onClose:function(){return T(!1)},variant:"info",children:[Object(r.jsx)(A.a.Heading,{children:"Attention"}),"If you want to save your tasks, please ",Object(r.jsx)(u.Link,{to:"/signup",children:Object(r.jsx)("strong",{children:"sign in"})}),"."]}),Object(r.jsx)(U,{changed:function(e){var t=e.target;j(t.value),h(_(t.value))},submit:G,taskName:o,disabled:!b}),f&&Object(r.jsxs)(A.a,{variant:"danger",onClose:function(){return m()},dismissible:!0,children:[Object(r.jsx)(A.a.Heading,{children:"Error"}),f]}),Object(r.jsx)(B,{tasks:n,onTaskChecked:function(e,t){c((function(e){return Object(S.a)(Object(S.a)({},e),{},Object(N.a)({},t,Object(S.a)(Object(S.a)({},e[t]),{},{done:!0})))})),function(e){setTimeout((function(){n[e]&&I(e)}),300)}(t)},onTaskDeleted:I})]})},K=n(95),J=n(90),X=function(){var e=Object(a.useRef)(),t=Object(a.useRef)(),n=Object(a.useRef)(),c=g(),s=c.signup,i=c.currentUser,j=Object(a.useState)(""),d=Object(O.a)(j,2),b=d[0],h=d[1],x=Object(a.useState)(!1),p=Object(O.a)(x,2),f=p[0],m=p[1];function v(){return(v=Object(C.a)(y.a.mark((function r(a){return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a.preventDefault(),t.current.value===n.current.value){r.next=3;break}return r.abrupt("return",h("Passwords do not match"));case 3:return r.prev=3,h(""),m(!0),r.next=8,s(e.current.value,t.current.value);case 8:r.next=13;break;case 10:r.prev=10,r.t0=r.catch(3),h("Failed to create an account.");case 13:m(!1);case 14:case"end":return r.stop()}}),r,null,[[3,10]])})))).apply(this,arguments)}return Object(r.jsxs)(L.a,{className:"d-flex align-items-center justify-content-center mt-3",children:[Object(r.jsxs)("div",{className:"w-100",style:{maxWidth:"400px"},children:[Object(r.jsx)(K.a,{children:Object(r.jsxs)(K.a.Body,{children:[Object(r.jsx)("h2",{className:"text-center mb-4",children:"Sign up"}),f&&Object(r.jsx)("div",{className:"text-center mb-4",children:Object(r.jsx)(J.a,{animation:"border",role:"status",children:Object(r.jsx)("span",{className:"sr-only",children:"Loading..."})})}),b&&Object(r.jsx)(A.a,{variant:"danger",children:b}),Object(r.jsxs)(D.a,{onSubmit:function(e){return v.apply(this,arguments)},children:[Object(r.jsxs)(D.a.Group,{id:"email",children:[Object(r.jsx)(D.a.Label,{children:"Email"}),Object(r.jsx)(D.a.Control,{type:"email",required:!0,ref:e,disabled:f})]}),Object(r.jsxs)(D.a.Group,{id:"password",children:[Object(r.jsx)(D.a.Label,{children:"Password"}),Object(r.jsx)(D.a.Control,{type:"password",required:!0,ref:t,disabled:f})]}),Object(r.jsxs)(D.a.Group,{id:"password-confirm",children:[Object(r.jsx)(D.a.Label,{children:"Password confirmation"}),Object(r.jsx)(D.a.Control,{type:"password",required:!0,ref:n,disabled:f})]}),Object(r.jsx)(l.a,{disabled:f,className:"w-100",type:"submit",children:"Sign up"})]})]})}),Object(r.jsxs)("div",{className:"w-100 text-center mt-2",children:["Already have an account? ",Object(r.jsx)(u.Link,{to:"/login",children:"Log in"})]})]}),!f&&i&&Object(r.jsx)(o.c,{to:"/"})]})},M=function(){var e=Object(a.useRef)(),t=Object(a.useRef)(),n=g(),c=n.login,s=n.currentUser,i=Object(a.useState)(""),j=Object(O.a)(i,2),d=j[0],b=j[1],h=Object(a.useState)(!1),x=Object(O.a)(h,2),p=x[0],f=x[1];function m(){return(m=Object(C.a)(y.a.mark((function n(r){return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),n.prev=1,b(""),f(!0),n.next=6,c(e.current.value,t.current.value);case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),b("Failed to sign in.");case 11:f(!1);case 12:case"end":return n.stop()}}),n,null,[[1,8]])})))).apply(this,arguments)}return Object(r.jsxs)(L.a,{className:"d-flex align-items-center justify-content-center mt-3",children:[Object(r.jsxs)("div",{className:"w-100",style:{maxWidth:"400px"},children:[Object(r.jsx)(K.a,{children:Object(r.jsxs)(K.a.Body,{children:[Object(r.jsx)("h2",{className:"text-center mb-4",children:"Log in"}),p&&Object(r.jsx)("div",{className:"text-center mb-4",children:Object(r.jsx)(J.a,{animation:"border",role:"status",children:Object(r.jsx)("span",{className:"sr-only",children:"Loading..."})})}),d&&Object(r.jsx)(A.a,{variant:"danger",children:d}),Object(r.jsxs)(D.a,{onSubmit:function(e){return m.apply(this,arguments)},children:[Object(r.jsxs)(D.a.Group,{id:"email",children:[Object(r.jsx)(D.a.Label,{children:"Email"}),Object(r.jsx)(D.a.Control,{type:"email",required:!0,ref:e,disabled:p})]}),Object(r.jsxs)(D.a.Group,{id:"password",children:[Object(r.jsx)(D.a.Label,{children:"Password"}),Object(r.jsx)(D.a.Control,{type:"password",required:!0,ref:t,disabled:p})]}),Object(r.jsx)(l.a,{disabled:p,className:"w-100",type:"submit",children:"Log in"})]}),Object(r.jsx)("div",{className:"w-100 text-center mt-3",children:Object(r.jsx)(u.Link,{to:"/forgot-password",children:"Forgot password?"})})]})}),Object(r.jsxs)("div",{className:"w-100 text-center mt-2",children:["Need an account? ",Object(r.jsx)(u.Link,{to:"/signup",children:"Sign up"})]})]}),!p&&s&&Object(r.jsx)(o.c,{to:"/"})]})},Y=function(){var e=Object(a.useRef)(),t=g().resetPassword,n=Object(a.useState)(""),c=Object(O.a)(n,2),s=c[0],i=c[1],o=Object(a.useState)(!1),j=Object(O.a)(o,2),d=j[0],b=j[1],h=Object(a.useState)(""),x=Object(O.a)(h,2),p=x[0],f=x[1];function m(){return(m=Object(C.a)(y.a.mark((function n(r){return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),n.prev=1,f(""),i(""),b(!0),n.next=7,t(e.current.value);case 7:f("Check your inbox for further instructions"),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),i("Failed to send password reset email.");case 13:b(!1);case 14:case"end":return n.stop()}}),n,null,[[1,10]])})))).apply(this,arguments)}return Object(r.jsx)(L.a,{className:"d-flex align-items-center justify-content-center mt-3",children:Object(r.jsxs)("div",{className:"w-100",style:{maxWidth:"400px"},children:[Object(r.jsx)(K.a,{children:Object(r.jsxs)(K.a.Body,{children:[Object(r.jsx)("h2",{className:"text-center mb-4",children:"Password reset"}),s&&Object(r.jsx)(A.a,{variant:"danger",children:s}),p&&Object(r.jsx)(A.a,{variant:"success",children:p}),Object(r.jsxs)(D.a,{onSubmit:function(e){return m.apply(this,arguments)},children:[Object(r.jsxs)(D.a.Group,{id:"email",children:[Object(r.jsx)(D.a.Label,{children:"Email"}),Object(r.jsx)(D.a.Control,{type:"email",required:!0,ref:e})]}),Object(r.jsx)(l.a,{disabled:d,className:"w-100",type:"submit",children:"Reset password"})]}),Object(r.jsx)("div",{className:"w-100 text-center mt-2",children:Object(r.jsx)(u.Link,{to:"/login",children:"Log in"})})]})}),Object(r.jsxs)("div",{className:"w-100 text-center mt-2",children:["Need an account? ",Object(r.jsx)(u.Link,{to:"/signup",children:"Sign up"})]})]})})},Q=function(){var e=g(),t=e.logout,n=e.currentUser,c=Object(a.useState)(""),s=Object(O.a)(c,2),i=s[0],u=s[1],j=Object(a.useState)(!1),d=Object(O.a)(j,2),b=d[0],h=d[1],x=function(){var e=Object(C.a)(y.a.mark((function e(n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,u(""),h(!0),e.next=6,t();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),u("Failed to log out.");case 11:h(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)(L.a,{className:"d-flex align-items-center justify-content-center mt-3",children:[Object(r.jsx)("div",{className:"w-100",style:{maxWidth:"400px"},children:Object(r.jsx)(K.a,{children:Object(r.jsxs)(K.a.Body,{children:[Object(r.jsx)("h3",{className:"text-center mb-4",children:"Press the button to log out. "}),b&&Object(r.jsx)("div",{className:"text-center mb-4",children:Object(r.jsx)(J.a,{animation:"border",role:"status",children:Object(r.jsx)("span",{className:"sr-only",children:"Loading..."})})}),i&&Object(r.jsx)(A.a,{variant:"danger",children:i}),Object(r.jsx)(D.a,{onSubmit:x,children:Object(r.jsx)(l.a,{disabled:b,className:"w-100",type:"submit",children:"Log out"})})]})})}),!b&&!n&&Object(r.jsx)(o.c,{to:"/login"})]})},V=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(k,{}),Object(r.jsx)(L.a,{className:"d-flex justify-content-center",children:Object(r.jsxs)(o.g,{children:[Object(r.jsx)(o.d,{path:"/signup",component:X}),Object(r.jsx)(o.d,{path:"/login",component:M}),Object(r.jsx)(o.d,{path:"/logout",component:Q}),Object(r.jsx)(o.d,{path:"/forgot-password",component:Y}),Object(r.jsx)(o.d,{path:"/",exact:!0,component:z})]})})]})};var Z=function(){return Object(r.jsx)(v,{children:Object(r.jsx)(H,{children:Object(r.jsx)(u.HashRouter,{basename:"/react-todo-2",children:Object(r.jsx)(V,{})})})})},$=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,96)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(Z,{})}),document.getElementById("root")),$()}},[[84,1,2]]]);
//# sourceMappingURL=main.5d6dbef4.chunk.js.map